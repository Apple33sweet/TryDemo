<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>vue自定义指令与实例</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/vue/2.1.3/vue.js"></script>
    <style>
        img{
            width:100px;
            height:100px;
        }
    </style>
</head>
<body>

<div id="app">
    <p>{{ message }}</p>
    <input v-focus>
    <div v-img="val.url" v-for="val in list" style="height:300px;width:300px;"></div>
</div>

<script type="text/javascript">

    var app = new Vue({
        el: '#app',
        data: {
            message : "xuxiao is boy",
            list:[
                {
                    url:'../pic/bg1.jpg'
                },
                {
                    url:'../pic/dog1.jpg'
                },
                {
                    url:'../pic/dog1.jpg'
                },
                {
                    url:'../pic/dog2.jpg'
                },
                {
                    url:'../pic/dog3.jpg'
                },
                {
                    url:'../pic/dog4.jpg'
                },
                {
                    url:'../pic/dog5.jpg'
                },
                {
                    url:'../pic/dog6.jpg'
                },


            ]
        },
        directives: {
            focus: {
                // 指令的定义
                inserted: function (el) {
                    el.focus()
                }
            },
            img:{
                inserted:function (el,binding) {
                    var color=Math.floor(Math.random()*1000000);
                    el.style.backgroundSize='100% 100%';
                    el.style.backgroundColor='#'+color;//设置随机的背景色

                    var img=new Image();
                    img.src=binding.value;//获得传给指令的值
                    img.onload=function () {
                        el.style.backgroundImage='url('+binding.value+')';
                    }
                }
            }
        }
    })
</script>
</body>
</html>